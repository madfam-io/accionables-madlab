<!DOCTYPE html>
<html lang="es" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#6366f1">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <title>MADLAB - Panel de Proyecto</title>
    
    <!-- CSS Modules -->
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">MADLAB</div>
                <div class="controls">
                    <span style="font-size: 0.8rem; opacity: 0.7; display: none;" class="hide-mobile">LeanTime ‚Ä¢ WhatsApp ‚Ä¢ Canva</span>
                    <button class="btn btn-secondary" id="langToggleBtn">
                        <span id="langToggle">English</span>
                    </button>
                    <!-- View Toggle Controls -->
                    <div class="view-controls hide-mobile">
                        <button class="btn btn-outline view-toggle" id="gridViewBtn" data-view="grid" title="Vista de cuadr√≠cula">
                            <span>üìä</span>
                            <span data-es="Cuadr√≠cula" data-en="Grid">Cuadr√≠cula</span>
                        </button>
                        <button class="btn btn-outline view-toggle active" id="listViewBtn" data-view="list" title="Vista de lista">
                            <span>üìã</span>
                            <span data-es="Lista" data-en="List">Lista</span>
                        </button>
                    </div>
                    
                    <!-- Collapse/Expand All Controls -->
                    <div class="phase-controls">
                        <button class="btn btn-outline" id="collapseAllBtn" title="Colapsar todas las fases">
                            <span>üìÅ</span>
                            <span class="hide-mobile" data-es="Colapsar" data-en="Collapse">Colapsar</span>
                        </button>
                        <button class="btn btn-outline" id="expandAllBtn" title="Expandir todas las fases">
                            <span>üìÇ</span>
                            <span class="hide-mobile" data-es="Expandir" data-en="Expand">Expandir</span>
                        </button>
                    </div>
                    
                    <div class="theme-switcher">
                        <button class="theme-btn active" title="Auto">üåì</button>
                        <button class="theme-btn" title="Light">‚òÄÔ∏è</button>
                        <button class="theme-btn" title="Dark">üåô</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Hero Section -->
        <div class="hero">
            <h1 id="heroTitle">Lista de Tareas del Proyecto MADLAB</h1>
            <p id="heroSubtitle">Proyecto Colaborativo: MADFAM √ó La Ciencia Del Juego</p>
            <p id="heroStartDate" style="margin-top: 1rem; font-size: 1rem; opacity: 0.9;">üöÄ Inicio: Lunes 11 de Agosto, 2025</p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalTasksCount">--</div>
                <div class="stat-label" data-es="Tareas Totales" data-en="Total Tasks">Tareas Totales</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="projectDaysCount">--</div>
                <div class="stat-label" data-es="D√≠as de Proyecto" data-en="Project Days">D√≠as de Proyecto</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalHoursCount">--</div>
                <div class="stat-label" data-es="Horas Estimadas" data-en="Estimated Hours">Horas Estimadas</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="teamMembersCount">--</div>
                <div class="stat-label" data-es="Miembros del Equipo" data-en="Team Members">Miembros del Equipo</div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-group">
                <input type="text" id="searchBox" class="search-box" placeholder="Buscar tareas..." />
                
                <select id="teamFilter">
                    <option value="">Todos los Miembros</option>
                    <option value="Aldo">Aldo</option>
                    <option value="Nuri">Nuri</option>
                    <option value="Luis">Luis</option>
                    <option value="Silvia">Silvia</option>
                    <option value="Caro">Caro</option>
                    <option value="All">Equipo Completo</option>
                </select>
                
                <select id="difficultyFilter">
                    <option value="">Toda Dificultad</option>
                    <option value="1">Nivel 1</option>
                    <option value="2">Nivel 2</option>
                    <option value="3">Nivel 3</option>
                    <option value="4">Nivel 4</option>
                    <option value="5">Nivel 5</option>
                </select>
                
                <select id="phaseFilter">
                    <option value="">Todas las Fases</option>
                    <option value="1">Fase 1: Fundaci√≥n</option>
                    <option value="2">Fase 2: Desarrollo</option>
                    <option value="3">Fase 3: Piloto Prep</option>
                    <option value="4">Fase 4: Piloto</option>
                    <option value="5">Fase 5: Lanzamiento</option>
                </select>
                
                <select id="durationFilter">
                    <option value="">Toda Duraci√≥n</option>
                    <option value="short">Corta (‚â§2h)</option>
                    <option value="medium">Media (2-5h)</option>
                    <option value="long">Larga (>5h)</option>
                </select>
                
                <button class="btn btn-export" id="exportBtn">
                    <span>üìä</span>
                    <span data-es="Exportar" data-en="Export">Exportar</span>
                </button>
                
                <button class="btn btn-outline" id="clearFiltersBtn">
                    <span>üóëÔ∏è</span>
                    <span data-es="Limpiar" data-en="Clear">Limpiar</span>
                </button>
            </div>
            
            <!-- Active Filter Chips -->
            <div id="filterChips" class="filter-chips" style="display: none;">
                <!-- Filter chips will be dynamically added here -->
            </div>
            
            <div style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                <span data-es="Mostrando" data-en="Showing">Mostrando</span>
                <span id="taskCounter">110 / 110</span>
                <span data-es="tareas" data-en="tasks">tareas</span>
            </div>
        </div>

        <!-- Tasks Container -->
        <div id="tasksContainer">
            <!-- Phase 1 -->
            <div class="phase" data-phase="1">
                <div class="phase-header" onclick="window.madlabApp?.togglePhase(1)">
                    <div class="phase-title">Fase 1: Fundaci√≥n (11 Ago - 5 Sep, 2025)</div>
                    <div class="phase-toggle">üîΩ</div>
                </div>
                <div class="phase-content">
                    <!-- Tasks will be dynamically populated here -->
                </div>
            </div>

            <!-- Phase 2 -->
            <div class="phase" data-phase="2">
                <div class="phase-header" onclick="window.madlabApp?.togglePhase(2)">
                    <div class="phase-title">Fase 2: Desarrollo de Contenido (6-25 Sep, 2025)</div>
                    <div class="phase-toggle">üîΩ</div>
                </div>
                <div class="phase-content">
                    <!-- Tasks will be dynamically populated here -->
                </div>
            </div>

            <!-- Phase 3 -->
            <div class="phase" data-phase="3">
                <div class="phase-header" onclick="window.madlabApp?.togglePhase(3)">
                    <div class="phase-title">Fase 3: Preparaci√≥n del Piloto (26 Sep - 5 Oct, 2025)</div>
                    <div class="phase-toggle">üîΩ</div>
                </div>
                <div class="phase-content">
                    <!-- Tasks will be dynamically populated here -->
                </div>
            </div>

            <!-- Phase 4 -->
            <div class="phase" data-phase="4">
                <div class="phase-header" onclick="window.madlabApp?.togglePhase(4)">
                    <div class="phase-title">Fase 4: Piloto e Iteraci√≥n (6-20 Oct, 2025)</div>
                    <div class="phase-toggle">üîΩ</div>
                </div>
                <div class="phase-content">
                    <!-- Tasks will be dynamically populated here -->
                </div>
            </div>

            <!-- Phase 5 -->
            <div class="phase" data-phase="5">
                <div class="phase-header" onclick="window.madlabApp?.togglePhase(5)">
                    <div class="phase-title">Fase 5: Listos para el Lanzamiento (21-31 Oct, 2025)</div>
                    <div class="phase-toggle">üîΩ</div>
                </div>
                <div class="phase-content">
                    <!-- Tasks will be dynamically populated here -->
                </div>
            </div>
        </div>

        <!-- Team Summary Section -->
        <hr class="section-separator">
        
        <h2 class="team-summary-title">
            <span data-es="Resumen del Equipo" data-en="Team Summary">Resumen del Equipo</span>
        </h2>

        <div class="team-grid" id="teamSummary">
            <!-- Team members will be dynamically generated here -->
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- JavaScript Modules -->
    <script type="module" src="/js/app.js"></script>
    
    <!-- Additional Scripts for Enhanced Features -->
    <script>
        // Additional event handlers
        document.addEventListener('DOMContentLoaded', () => {
            // Clear filters button
            const clearFiltersBtn = document.getElementById('clearFiltersBtn');
            if (clearFiltersBtn) {
                clearFiltersBtn.addEventListener('click', () => {
                    window.madlabApp?.components?.get('tasks')?.clearFilters();
                });
            }
            
            // Collapse/Expand all buttons
            const collapseAllBtn = document.getElementById('collapseAllBtn');
            const expandAllBtn = document.getElementById('expandAllBtn');
            
            if (collapseAllBtn) {
                collapseAllBtn.addEventListener('click', () => {
                    window.madlabApp?.collapseAllPhases();
                });
            }
            
            if (expandAllBtn) {
                expandAllBtn.addEventListener('click', () => {
                    window.madlabApp?.expandAllPhases();
                });
            }
        });

        // Enhanced CSS for SPA functionality
        const additionalStyles = `
            .spa-initialized {
                --transition-fast: 0.15s ease;
                --transition-medium: 0.3s ease;
                --transition-slow: 0.5s ease;
            }

            .modern-ui .task-card {
                transition: all var(--transition-medium);
                transform: translateZ(0);
            }

            .modern-ui .task-card:hover {
                transform: translateY(-4px) scale(1.02);
                box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
            }

            .task-selected {
                animation: taskSelect 0.3s ease;
                background: linear-gradient(135deg, var(--card), rgba(99, 102, 241, 0.1));
            }

            @keyframes taskSelect {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }

            .loading-overlay {
                position: fixed;
                top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                opacity: 0;
                visibility: hidden;
                transition: all var(--transition-medium);
            }

            .loading-overlay.active {
                opacity: 1;
                visibility: visible;
            }

            .loading-spinner {
                width: 64px;
                height: 64px;
                border: 4px solid rgba(255, 255, 255, 0.2);
                border-top: 4px solid var(--primary);
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }

            @media (max-width: 768px) {
                .modern-ui .task-card:hover {
                    transform: none;
                }
            }

            .modern-ui button {
                position: relative;
                overflow: hidden;
            }

            .modern-ui button::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 0;
                height: 0;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.2);
                transition: width 0.6s, height 0.6s;
                transform: translate(-50%, -50%);
                z-index: 0;
            }

            .modern-ui button:active::before {
                width: 300px;
                height: 300px;
            }

            .modern-ui button > * {
                position: relative;
                z-index: 1;
            }
        `;

        // Inject enhanced styles
        const styleSheet = document.createElement('style');
        styleSheet.textContent = additionalStyles;
        document.head.appendChild(styleSheet);

        // Add classes for enhanced functionality
        window.addEventListener('load', () => {
            document.body.classList.add('spa-initialized', 'modern-ui');
        });
    </script>
</body>
</html>